/**
 * httpUrl:要请求数据的api templateUrl:要请求的页面的地址 type:显示在哪个屏幕上，1为主屏，2为副屏
 */
var urlConfig = [ {
  'httpUrl': 'system/permission/list',
  'templateUrl': '/public/angularView/system/permissionList.html' + "?" + Math.random(),
  'type': 1,
  'title':'系统设置-权限设置-列表'
}, {
  'httpUrl': 'system/permission/detail',
  'templateUrl': '/public/angularView/system/permissionDetail.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-权限设置-详情'
}, {
  'httpUrl': 'system/permission/add',
  'templateUrl': '/public/angularView/system/permissionAdd.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-权限设置-添加'
}, {
  'httpUrl': 'system/permission/edit',
  'templateUrl': '/public/angularView/system/permissionAdd.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-权限设置-编辑'
}, {
  'httpUrl': 'system/basicData/list',
  'templateUrl': '/public/angularView/system/basicDataList.html' + "?" + Math.random(),
  'type': 1,
  'title':'系统设置-基础数据-列表'
}, {
  'httpUrl': 'system/basicData/shopAdd',
  'templateUrl': '/public/angularView/system/basicDataShopAdd.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-基础数据-购物店添加'
}, {
  'httpUrl': 'system/basicData/shopDetail',
  'templateUrl': '/public/angularView/system/basicDataShopDetail.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-基础数据-购物店详情'
}, {
  'httpUrl': 'system/basicData/shopEdit',
  'templateUrl': '/public/angularView/system/basicDataShopAdd.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-基础数据-购物店编辑'
}, {
  'httpUrl': 'system/basicData/trafficAdd',
  'templateUrl': '/public/angularView/system/basicDataTrafficAdd.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-基础数据-交通添加'
}, {
  'httpUrl': 'system/basicData/trafficDetail',
  'templateUrl': '/public/angularView/system/basicDataTrafficDetail.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-基础数据-交通详情'
}, {
 'httpUrl': 'system/basicData/trafficEdit',
 'templateUrl': '/public/angularView/system/basicDataTrafficAdd.html' + "?" + Math.random(),
 'type': 2,
 'title':'系统设置-基础数据-交通编辑'
}, {
 'httpUrl': 'system/basicData/hotelAdd',
 'templateUrl': '/public/angularView/system/basicDataHotelAdd.html' + "?" + Math.random(),
 'type': 2,
 'title':'系统设置-基础数据-酒店添加'
}, {
 'httpUrl': 'system/basicData/hotelDetail',
 'templateUrl': '/public/angularView/system/basicDataHotelDetail.html' + "?" + Math.random(),
 'type': 2,
 'title':'系统设置-基础数据-酒店详情'
}, {
 'httpUrl': 'system/basicData/hotelEdit',
 'templateUrl': '/public/angularView/system/basicDataHotelAdd.html' + "?" + Math.random(),
 'type': 2,
 'title':'系统设置-基础数据-酒店编辑'
}, {
  'httpUrl': 'system/basicData/cooperateDetail',
  'templateUrl': '/public/angularView/system/basicDataCooperateDetail.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-基础数据-合作单位详情'
}, {
  'httpUrl': 'system/basicData/cooperateAdd',
  'templateUrl': '/public/angularView/system/basicDataCooperateAdd.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-基础数据-合作单位添加'
}, {
  'httpUrl': 'system/basicData/cooperateEdit',
  'templateUrl': '/public/angularView/system/basicDataCooperateAdd.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-基础数据-合作单位编辑'
}, {
  'httpUrl': 'system/basicData/visaMaterialDetail',
  'templateUrl': '/public/angularView/system/basicDataVisaMaterialDetail.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-基础数据-签证材料详情'
}, {
  'httpUrl': 'system/basicData/visaMaterialAdd',
  'templateUrl': '/public/angularView/system/basicDataVisaMaterialAdd.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-基础数据-签证材料添加'
}, {
  'httpUrl': 'system/basicData/visaMaterialEdit',
  'templateUrl': '/public/angularView/system/basicDataVisaMaterialAdd.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-基础数据-签证材料编辑'
}, {
  'httpUrl': 'system/basicData/travelGoodsDetail',
  'templateUrl': '/public/angularView/system/basicDataTravelGoodsDetail.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-基础数据-旅游用品详情'
}, {
  'httpUrl': 'system/basicData/travelGoodsAdd',
  'templateUrl': '/public/angularView/system/basicDataTravelGoodsAdd.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-基础数据-旅游用品添加'
}, {
  'httpUrl': 'system/basicData/travelGoodsEdit',
  'templateUrl': '/public/angularView/system/basicDataTravelGoodsAdd.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-基础数据-旅游用品编辑'
}, {
  'httpUrl': 'system/basicData/destinationDetail',
  'templateUrl': '/public/angularView/system/basicDataDestinationDetail.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-基础数据-目的地详情'
}, {
  'httpUrl': 'system/basicData/destinationAdd',
  'templateUrl': '/public/angularView/system/basicDataDestinationAdd.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-基础数据-目的地添加'
}, {
  'httpUrl': 'system/basicData/destinationEdit',
  'templateUrl': '/public/angularView/system/basicDataDestinationAdd.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-基础数据-目的地编辑'
}, {
  'httpUrl': 'system/basicData/shipCompanyDetail',
  'templateUrl': '/public/angularView/system/basicDataShipCompanyDetail.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-基础数据-目的地详情'
}, {
  'httpUrl': 'system/basicData/shipDetail',
  'templateUrl': '/public/angularView/system/basicDataShipDetail.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-基础数据-邮轮品牌详情'
}, {
  'httpUrl': 'system/basicData/shipCompanyAdd',
  'templateUrl': '/public/angularView/system/basicDataShipCompanyAdd.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-基础数据-邮轮品牌添加'
}, {
  'httpUrl': 'system/basicData/shipCompanyEdit',
  'templateUrl': '/public/angularView/system/basicDataShipCompanyAdd.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-基础数据-邮轮品牌编辑'
}, {
  'httpUrl': 'system/branchCompany/list',
  'templateUrl': '/public/angularView/system/branchCompanyList.html' + "?" + Math.random(),
  'type': 1,
  'title':'系统设置-分公司-列表'
}, {
  'httpUrl': 'system/branchCompany/add',
  'templateUrl': '/public/angularView/system/branchCompanyAdd.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-分公司-添加'
},{
  'httpUrl': 'system/branchCompany/detail',
  'templateUrl': '/public/angularView/system/branchCompanyDetail.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-分公司-详情'
},{
  'httpUrl': 'system/branchCompany/edit',
  'templateUrl': '/public/angularView/system/branchCompanyAdd.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-分公司-编辑'
},{
  'httpUrl': 'system/counterparts/list',
  'templateUrl': '/public/angularView/system/counterpartsList.html' + "?" + Math.random(),
  'type': 1,
  'title':'系统设置-同行-列表'
}, {
  'httpUrl': 'system/counterparts/add',
  'templateUrl': '/public/angularView/system/counterpartsAdd.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-同行-添加'
},{
  'httpUrl': 'system/counterparts/detail',
  'templateUrl': '/public/angularView/system/counterpartsDetail.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-同行-详情'
},{
  'httpUrl': 'system/counterparts/edit',
  'templateUrl': '/public/angularView/system/counterpartsAdd.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-同行-编辑'
},{
  'httpUrl': 'system/experiential/list',
  'templateUrl': '/public/angularView/system/experientialList.html' + "?" + Math.random(),
  'type': 1,
  'title':'系统设置-体验店-列表'
}, {
  'httpUrl': 'system/experiential/add',
  'templateUrl': '/public/angularView/system/experientialAdd.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-体验店-添加'
},{
  'httpUrl': 'system/experiential/detail',
  'templateUrl': '/public/angularView/system/experientialDetail.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-体验店-详情'
},{
  'httpUrl': 'system/experiential/edit',
  'templateUrl': '/public/angularView/system/experientialAdd.html' + "?" + Math.random(),
  'type': 2,
  'title':'系统设置-体验店-编辑'
},{
  'httpUrl': 'tourGuideCenter/TourGuideArrange/list',
  'templateUrl': '/public/angularView/tourGuide/tourGuideArrangeList.html' + "?" + Math.random(),
  'type': 1,
  'title':'导游中心-导游安排-列表'
},{
  'httpUrl': 'tourGuideCenter/TourGuideArrange/detail',
  'templateUrl': '/public/angularView/tourGuide/tourGuideArrangeDetail.html' + "?" + Math.random(),
  'type': 2,
  'title':'导游中心-导游安排-详情'
},{
  'httpUrl': 'tourGuideCenter/TourGuideArrange/team',
  'templateUrl': '/public/angularView/tourGuide/tourGuideTeam.html' + "?" + Math.random(),
  'type': 2,
  'title':'导游中心-导游安排-团队'
},{
  'httpUrl': 'tourGuideCenter/TourGuideScheduling/list',
  'templateUrl': '/public/angularView/tourGuide/tourGuideScheduleList.html' + "?" + Math.random(),
  'type': 1,
  'title':'导游中心-导游排班-列表'
},{
  'httpUrl': 'tourGuideCenter/TourGuideScheduling/teamTourDetail',
  'templateUrl': '/public/angularView/tourGuide/tourGuideScheduleTeamTour.html' + "?" + Math.random(),
  'type': 2,
  'title':'导游中心-导游排班-行程详情'
},{
  'httpUrl': 'tourGuideCenter/TourGuideScheduling/cruiseDetail',
  'templateUrl': '/public/angularView/tourGuide/tourGuideScheduleCruise.html' + "?" + Math.random(),
  'type': 2,
  'title':'导游中心-导游排班-行程详情'
},{
  'httpUrl': 'tourGuideCenter/TourGuideScheduling/freeTourDetail',
  'templateUrl': '/public/angularView/tourGuide/tourGuideScheduleFreeTour.html' + "?" + Math.random(),
  'type': 2,
  'title':'导游中心-导游排班-行程详情'
},{
  'httpUrl': 'tourGuideCenter/TourGuideScheduling/drivingTourDetail',
  'templateUrl': '/public/angularView/tourGuide/tourGuideScheduleDrivingTour.html' + "?" + Math.random(),
  'type': 2,
  'title':'导游中心-导游排班-行程详情'
},{
  'httpUrl': 'tourGuideCenter/TourGuideScheduling/customTourDetail',
  'templateUrl': '/public/angularView/tourGuide/tourGuideScheduleCustomTour.html' + "?" + Math.random(),
  'type': 2,
  'title':'导游中心-导游排班-行程详情'
},{
  'httpUrl': 'tourGuideCenter/TourGuideTravels/list',
  'templateUrl': '/public/angularView/tourGuide/tourGuideTravelList.html' + "?" + Math.random(),
  'type': 1,
  'title':'导游中心-导游游记-列表'
},{
  'httpUrl': 'tourGuideCenter/TourGuideTravels/detail',
  'templateUrl': '/public/angularView/tourGuide/tourGuideTravelDetail.html' + "?" + Math.random(),
  'type': 2,
  'title':'导游中心-导游游记-详情'
},{
  'httpUrl': 'tourGuideCenter/TourGuideTravels/add',
  'templateUrl': '/public/angularView/tourGuide/tourGuideTravelAdd.html' + "?" + Math.random(),
  'type': 2,
  'title':'导游中心-导游游记-添加'
},{
  'httpUrl': 'tourGuideCenter/TourGuideTravels/edit',
  'templateUrl': '/public/angularView/tourGuide/tourGuideTravelAdd.html' + "?" + Math.random(),
  'type': 2,
  'title':'导游中心-导游游记-编辑'
},{
  'httpUrl': 'tourGuideCenter/TourGuideManagement/list',
  'templateUrl': '/public/angularView/tourGuide/tourGuideManageList.html' + "?" + Math.random(),
  'type': 1,
  'title':'导游中心-导游管理-列表'
},{
  'httpUrl': 'tourGuideCenter/TourGuideManagement/detail',
  'templateUrl': '/public/angularView/tourGuide/tourGuideManageDetail.html' + "?" + Math.random(),
  'type': 2,
  'title':'导游中心-导游管理-详情'
},{
  'httpUrl': 'tourGuideCenter/TourGuideManagement/add',
  'templateUrl': '/public/angularView/tourGuide/tourGuideManageAdd.html' + "?" + Math.random(),
  'type': 2,
  'title':'导游中心-导游管理-添加'
},{
  'httpUrl': 'tourGuideCenter/TourGuideManagement/edit',
  'templateUrl': '/public/angularView/tourGuide/tourGuideManageAdd.html' + "?" + Math.random(),
  'type': 2,
  'title':'导游中心-导游管理-编辑'
},{
  'httpUrl': 'tourGuideCenter/TourGuideHonor/list',
  'templateUrl': '/public/angularView/tourGuide/tourGuideHonorList.html' + "?" + Math.random(),
  'type': 1,
  'title':'导游中心-导游荣誉-列表'
},{
  'httpUrl': 'tourGuideCenter/TourGuideHonor/detail',
  'templateUrl': '/public/angularView/tourGuide/tourGuideHonorDetail.html' + "?" + Math.random(),
  'type': 2,
  'title':'导游中心-导游荣誉-详情'
},{
  'httpUrl': 'tourGuideCenter/TourGuideHonor/add',
  'templateUrl': '/public/angularView/tourGuide/tourGuideHonorAdd.html' + "?" + Math.random(),
  'type': 2,
  'title':'导游中心-导游荣誉-添加'
},{
  'httpUrl': 'tourGuideCenter/TourGuideHonor/edit',
  'templateUrl': '/public/angularView/tourGuide/tourGuideHonorAdd.html' + "?" + Math.random(),
  'type': 2,
  'title':'导游中心-导游荣誉-编辑'
}
];
/**
 * 判断页面是否加载过
 *
 * @param {type}
 *            ID 页面上的元素的ID
 * @returns {Boolean}
 */
function isLoaded(ID) {
  if (document.getElementById(ID)) {
    return true;
  } else {
    return false;
  }
}

function track(obj) {
  if (operationModel == 'debug') {
    console.log(obj);
  }
}

/**
 * 获取url的配置
 *
 * @param {type}
 *            httpUrl 需要获取的url
 * @param {type}
 *            urlConfig 所有的配置
 * @returns {getUrlByHttpUrl.view|getUrlByHttpUrl.urlConfig}
 */
function getUrlByHttpUrl(httpUrl, urlConfig) {
  var targetUrl = httpUrl.replace(baseUrl, "");
  targetUrl = targetUrl.replace(productUrl, "");
  if ((index = targetUrl.indexOf('?')) > 0) {
    targetUrl = targetUrl.substr(0, index);
  }
  for (i = 0; i < urlConfig.length; i++) {
    if (urlConfig[i].httpUrl == targetUrl) {
      var view = urlConfig[i];
      view.id = createID(httpUrl);
      view.targetUrl = httpUrl;
      return view;
    }
  }
}

function getUrlType(url) {
  if (url.indexOf(productUrl) != -1) {
    return productType;
  } else if (url.indexOf(intentionCustomerUrl) != -1) {
    return intentionCustomerType;
  } else if (url.indexOf(dreamFlyUrl) != -1) {
    return dreamFlyType;
  } else if(url.indexOf(crmUrl) != -1) {
    return crmType;
  } else {
    return commomType;
  }
}

/**
 * 根据访问url的生成元素的ID
 *
 * @param {type}
 *            url
 * @returns {String}
 */
function createID(url) {
  url = url.replace(baseUrl, "");
  url = url.replace(productUrl, "");
  if (url) {
    var id = '';
    var index = url.indexOf("?");
    if (index > 0) {
      var urlArr = url.split('?');
      id += urlArr[0].replace(/\//g, "-");
      var parameters = urlArr[1].split('&');
      for (var i = 0; i < parameters.length; i++) {
        id += "-" + parameters[i].replace(/=/, "-");
      }
    } else {
      id += url.replace(/\//g, "-");
    }
    return id;
  } else {
    return null;
  }

}

/**
 * anglaurjs 中$http 请求整合
 *
 * @param {type}
 *            $http
 * @param {type}
 *            opts
 * @returns {unresolved}
 */
function HYhttp($http, opts) {
  var defaults = {
    url: '',
    data: {},
    method: 'GET'
  };
  var config = $.extend(defaults, opts);
  var obj;
  var httpConfig;
  var type = getUrlType(config.url);
  httpConfig = {
    method: config.method,
    url: config.url,
  };
  if (config.method == 'GET') {
    httpConfig.params = config.data;
    switch (type) {
      case intentionCustomerType:
        httpConfig.withCredentials = true;
        break;
      case dreamFlyType:
        httpConfig.withCredentials = true;
        break;
      case crmType:
        httpConfig.withCredentials = true;
        break;
    }
    obj = $http(httpConfig);
  } else {
    if (type == productType) {
      if (userinfo.apiToken) {
        httpConfig.url += '?token=' + userinfo.apiToken;
      }
    } else if (type == intentionCustomerType || type == dreamFlyType || type == crmType) {
      httpConfig.withCredentials = true;
    }
    httpConfig.data = $.param(config.data);
    httpConfig.headers = {
      'Content-Type': 'application/x-www-form-urlencoded'
    };
    obj = $http(httpConfig);
  }
  return obj;
}

function getObj(obj, str) {
  var param = str.split(',');
  if (param.length == 1) {
    return obj[param[0]];
  } else if (param.length == 2) {
    return obj[param[0]][param[1]];
  } else if (param.length == 3) {
    return obj[param[0]][param[1]][param[2]];
  } else if (param.length == 4) {
    return obj[param[0]][param[1]][param[2]][param[3]];
  } else if (param.length == 5) {
    return obj[param[0]][param[1]][param[2]][param[3]][param[4]];
  }
}

function updateObj(obj, str, newObj) {
  var param = str.split(',');
  if (param.length == 1) {
    obj[param[0]] = newObj;
  } else if (param.length == 2) {
    obj[param[0]][param[1]] = newObj;
  } else if (param.length == 3) {
    obj[param[0]][param[1]][param[2]] = newObj;
  } else if (param.length == 4) {
    obj[param[0]][param[1]][param[2]][param[3]] = newObj;
  } else if (param.length == 5) {
    obj[param[0]][param[1]][param[2]][param[3]][param[4]] = newObj;
  }
}

function clone(obj) {
  if (typeof(obj) != 'object')
    return obj;
  var result = {};
  for (var i in obj) {
    var tmp = clone(obj[i]);
    result[i] = tmp;
  }
  return result;
}

function withoutFlaseKey(param) {
  var newObj = {};
  for (var p in param) {
    if (param[p] || param[p] === false || param[p] === 0) {
      newObj[p] = param[p];
    }
  }
  return newObj;
}

/**
 * 获取webservice头信息
 *
 * @param {[type]}
 *            functionName 要调用的方法名
 * @return {[type]} [description]
 */
function getWebServiceHeader(functionName) {
  var data = '';
  data += '<?xml version="1.0" encoding="utf-8"?>';
  data += '<soap12:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope">';
  data += '<soap12:Body>';
  data += '<' + functionName + ' xmlns="http://tempuri.org/" />';
  data += '</soap12:Body>';
  data += '</soap12:Envelope>';
  return data;
}
/**
 * 获取随机整数
 *
 * @param min
 * @param max
 * @returns
 */
function getRandomInt(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

function addZeroToObjectID(number) {
  var length = 24;
  var buffer = "";
  if (number === "") {
    for (var i = 0; i < length; i++) {
      buffer += "0";
    }
  } else {
    if (length < number.length) {
      return "";
    } else if (length == number.length) {
      return number;
    } else {
      for (var m = 0; m < (length - number.length); m++) {
        buffer += "0";
      }
      buffer += number;
    }
  }
  return buffer;
}

function commitPrintData(verb, url, data, target){
  var form = document.createElement("form");
  form.action = url;
  form.method = verb;
  form.target = target || "_self";
  if (data) {
    for (var key in data) {
      var input = document.createElement("textarea");
      input.name = key;
      input.value = typeof data[key] === "object" ? JSON.stringify(data[key]) : data[key];
      form.appendChild(input);
    }
  }
  form.style.display = 'none';
  document.body.appendChild(form);
  form.submit();
}
